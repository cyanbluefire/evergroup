<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<script src="jquery-2.1.3.min.js" type="text/javascript"></script>
		<style type="text/css">
			body, html,#l-map {width: 100%;height: 100%;overflow: hidden;margin:0;}
		</style>
		<script type="text/javascript" src="http://api.map.baidu.com/api?type=quick&ak=cElCR5PGh4nlvqxeMb26Mmkr&v=1.0"></script>
		<title>显示地图</title>
	</head>

	<body>
		<div id="l-map"></div>
	</body>

</html>
<script type="text/javascript">
	$(function() {
		function getLocation() {
			navigator.geolocation.getCurrentPosition(showPosition, locationError);
		}

		function showPosition(position) {
				var log = position.coords.longitude;
				var lat = position.coords.latitude;
				var map = new BMap.Map("l-map");
				//	map.centerAndZoom(new BMap.Point(116.404, 39.915), 14);  
				map.centerAndZoom(new BMap.Point(log, lat), 14);
				map.addControl(new BMap.ZoomControl());  //添加地图缩放控件
				var marker1 = new BMap.Marker(new BMap.Point(log, lat));  //创建标注
				map.addOverlay(marker1);                 // 将标注添加到地图中
			}
			// 定位失败时，执行的函数 

		function locationError(error) {
			switch (error.code) {
				case error.PERMISSION_DENIED:
					alert("User denied the request for Geolocation.");
					break;
				case error.POSITION_UNAVAILABLE:
					alert("Location information is unavailable.");
					break;
				case error.TIMEOUT:
					alert("The request to get user location timed out.");
					break;
				case error.UNKNOWN_ERROR:
					alert("An unknown error occurred.");
					break;
			}
		}
		window.onload = getLocation;
	})
</script>